<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>회원가입</title>

    <script>
        function checkUsername() {
            const username = document.getElementById("username").value;

            if (username.trim() === "") {
                alert("아이디를 입력하세요.");
                return;
            }

            fetch("/check-username?username=" + username)
                .then(res => res.text())
                .then(data => {
                    const result = document.getElementById("checkResult");

                    if (data === "EXIST") {
                        result.style.color = "red";
                        result.textContent = "이미 사용 중인 아이디입니다.";
                    } else {
                        result.style.color = "green";
                        result.textContent = "사용 가능한 아이디입니다!";
                    }
                });
        }
    </script>
</head>
<body>

<h2>회원가입</h2>

<form action="/signup" method="post">

    <div>
        <label>아이디 :
            <input type="text" id="username" name="username" required>
        </label>
        <button type="button" onclick="checkUsername()">중복확인</button>
        <span id="checkResult"></span>
    </div>

    <div>
        <label>비밀번호 :
            <input type="password" name="password" required>
        </label>
    </div>

    <div>
        <label>닉네임 :
            <input type="text" name="nickname" required>
        </label>
    </div>

    <button type="submit">회원가입</button>
</form>

<a href="/login">로그인으로 돌아가기</a>

</body>
</html>

